import{_ as v,d as $,o as u,c as _,a as t,w as l,b,e as d,f as p,g as y}from"./index-77ab94be.js";import{E as n,a as z,b as P,c as S}from"./el-table-column-f3d31b50.js";import{E as T,a as U,b as L,c as W}from"./el-button-d66579c7.js";import{E as N,a as R,b as q}from"./el-card-5d09da19.js";import{E as A,a as M}from"./el-select-1b3622b0.js";import{E as G,a as j}from"./el-col-36a0b091.js";import{f as i}from"./folder-59f37d29.js";import{E as H}from"./el-message-box-e6138db0.js";/* empty css                   */const J=$({data(){return{formData:[],folder:{},dialogFormVisible:!1,formLabelWidth:120,folderData:[],folderCount:0,pageSize:5,currentPage:1}},methods:{getFileInfoByFolder(){i.queryByname(this.formData.name).then(e=>{this.formData.name?this.formData=e.data.folders:this.initData()})},initFolderData(){i.all().then(e=>{this.folderData=e.data.folders,this.folderCount=this.folderData.length})},initData(){i.all().then(e=>{this.folderData=e.data.folders,this.folderCount=this.folderData.length,this.formData=this.getData(0,this.pageSize-1)})},handlePageChange(e){this.currentPage=e;const a=(e-1)*this.pageSize,h=a+this.pageSize-1;this.formData=this.formData=this.getData(a,h)},getData(e,a){return this.folderData.slice(e,a+1)},handleDelete(e){H.confirm("你确定删除该行数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{i.deleteById(e).then(a=>{a.success?(n({type:"success",message:"删除成功"}),this.initData()):n({type:"error",message:"删除失败"})})}).catch(()=>{n({type:"warning",message:"取消删除"})})},handleEdit(e){this.dialogFormVisible=!0,i.queryById(e).then(a=>{this.folder=a.data.folder})},toAdd(){this.dialogFormVisible=!0,this.folder={}},excute(){this.folder.id!=null?(i.updateById(this.folder).then(e=>{e.success?(n({type:"success",message:"编辑成功"}),this.initData()):n({type:"error",message:"编辑失败"})}),this.dialogFormVisible=!1):i.add(this.folder).then(e=>{e.success?(n({type:"success",message:"编辑成功"}),this.initData()):n({type:"error",message:"添加失败"}),this.dialogFormVisible=!1})}},computed:{valueForStatistic(){return this.folderCount}},mounted(){this.initData(),this.initFolderData(),this.handlePageChange(1)}}),K={class:""},O={class:"table"},Q=["src"],X={class:"dialog-footer"};function Y(e,a,h,Z,x,ee){const f=T,s=U,D=G,V=j,C=N,r=S,g=M,E=z,w=A,m=L,c=R,k=q,F=W,B=P;return u(),_("div",K,[t(C,{id:"search"},{default:l(()=>[t(V,null,{default:l(()=>[t(D,{span:20},{default:l(()=>[t(f,{modelValue:e.formData.name,"onUpdate:modelValue":a[0]||(a[0]=o=>e.formData.name=o),placeholder:"文件夹名称",clearable:""},null,8,["modelValue"]),t(s,{onClick:e.getFileInfoByFolder,type:"primary",round:""},{default:l(()=>[d("查询")]),_:1},8,["onClick"])]),_:1}),t(s,{type:"success",onClick:e.toAdd,style:{"margin-left":"-520px"}},{default:l(()=>[d("添加")]),_:1},8,["onClick"])]),_:1})]),_:1}),b("div",O,[t(E,{data:e.formData,style:{width:"100%"}},{default:l(()=>[t(r,{fixed:"",prop:"id",label:"编号",width:"150",align:"center"}),t(r,{prop:"name",label:"文件夹名称'",width:"120",align:"center"}),t(r,{label:"图标",width:"200",align:"center"},{default:l(({row:o})=>[o.icon?(u(),_("img",{key:0,src:o.icon,alt:"图标",style:{width:"100px",height:"100px"}},null,8,Q)):p("",!0)]),_:1}),t(r,{prop:"pid",label:"父ID",width:"120",align:"center"}),t(r,{label:"状态",width:"120",align:"center"},{default:l(({row:o})=>[o.status==!0?(u(),y(g,{key:0},{default:l(()=>[d("公开")]),_:1})):p("",!0),o.status==!1?(u(),y(g,{key:1},{default:l(()=>[d("会员")]),_:1})):p("",!0)]),_:1}),t(r,{fixed:"right",label:"操作",width:"180",align:"center"},{default:l(o=>[t(s,{type:"primary",onClick:I=>e.handleEdit(o.row.id)},{default:l(()=>[d("编辑")]),_:2},1032,["onClick"]),t(s,{type:"danger",onClick:I=>e.handleDelete(o.row.id)},{default:l(()=>[d("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(w,{small:"",background:"",layout:"prev, pager, next",total:e.folderCount,"page-size":e.pageSize,class:"mt-4",onCurrentChange:e.handlePageChange},null,8,["total","page-size","onCurrentChange"])]),t(B,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":a[7]||(a[7]=o=>e.dialogFormVisible=o),title:"添加/编辑"},{footer:l(()=>[b("span",X,[t(s,{onClick:a[5]||(a[5]=o=>e.dialogFormVisible=!1)},{default:l(()=>[d("取消")]),_:1}),t(s,{type:"primary",onClick:a[6]||(a[6]=o=>e.excute())},{default:l(()=>[d(" 确定 ")]),_:1})])]),default:l(()=>[t(F,{model:e.folder},{default:l(()=>[t(m,{label:"文件夹名称","label-width":e.formLabelWidth},{default:l(()=>[t(f,{modelValue:e.folder.name,"onUpdate:modelValue":a[1]||(a[1]=o=>e.folder.name=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(m,{label:"图标","label-width":e.formLabelWidth},{default:l(()=>[t(f,{modelValue:e.folder.icon,"onUpdate:modelValue":a[2]||(a[2]=o=>e.folder.icon=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(m,{label:"父ID","label-width":e.formLabelWidth},{default:l(()=>[t(f,{modelValue:e.folder.pid,"onUpdate:modelValue":a[3]||(a[3]=o=>e.folder.pid=o),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),t(m,{label:"状态","label-width":e.formLabelWidth},{default:l(()=>[t(k,{modelValue:e.folder.status,"onUpdate:modelValue":a[4]||(a[4]=o=>e.folder.status=o)},{default:l(()=>[t(c,{label:!0},{default:l(()=>[d("公开")]),_:1}),t(c,{label:!1},{default:l(()=>[d("会员")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const fe=v(J,[["render",Y],["__scopeId","data-v-d21d43b4"]]);export{fe as default};
