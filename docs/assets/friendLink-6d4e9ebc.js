import{_ as L,d as P,o as d,c,a as l,w as n,b as r,e as s,g as b,f as E}from"./index-77ab94be.js";import{E as f,a as $,b as I,c as B}from"./el-table-column-f3d31b50.js";import{E as U,a as W,b as T,c as z}from"./el-button-d66579c7.js";import{E as N,a as R,b as S}from"./el-card-5d09da19.js";import{E as M,a as j}from"./el-select-1b3622b0.js";import{E as A,a as q}from"./el-col-36a0b091.js";import{f as m}from"./friendLink-db7ebf07.js";import{E as G}from"./el-message-box-e6138db0.js";const O=P({data(){return{formData:[],folders:{},dialogFormVisible:!1,searchFolderId:[],formLabelWidth:100,previewUrl:"",previewModalVisible:!1,FriendLinkData:[],friendLinkCount:0,pageSize:5,currentPage:1}},methods:{getFileExtension(e){return e.substring(e.lastIndexOf(".")+1).toLowerCase()},isImage(e){const o=["jpg","jpeg","png"],i=this.getFileExtension(e);return o.includes(i)},isPdf(e){const o=["pdf"],i=this.getFileExtension(e);return o.includes(i)},isWord(e){const o=["doc","docx"],i=this.getFileExtension(e);return o.includes(i)},istxt(e){const o=["txt"],i=this.getFileExtension(e);return o.includes(i)},isPPT(e){const o=["ppt","pptx","pps","ppsx"],i=this.getFileExtension(e);return o.includes(i)},isExcel(e){const o=["xls","xlsx"],i=this.getFileExtension(e);return o.includes(i)},isVideo(e){const o=["mp4","avi","mkv","MP4"],i=this.getFileExtension(e);return o.includes(i)},previewImage(e){console.log("Preview Image:",e),alert("下载路径: "+e)},previewPdf(e){console.log("Preview PDF:",e)},previewWord(e){console.log("Preview Word:",e)},previewExcel(e){console.log("Preview Excel:",e)},previewVideo(e){console.log("Preview Video:",e)},checkFriendLinkName(){m.checkFriendLinkName(this.formData.name).then(e=>{e.msg=="文件夹重复"?f({message:"文件夹重复",type:"error"}):f({message:"该文件夹可添加",type:"success"})})},initFriendLinkData(){m.all().then(e=>{this.FriendLinkData=e.data.folders,this.friendLinkCount=this.FriendLinkData.length})},initData(){m.all().then(e=>{this.FriendLinkData=e.data.folders,this.friendLinkCount=this.FriendLinkData.length,this.formData=this.getData(0,this.pageSize-1)})},handlePageChange(e){this.currentPage=e;const o=(e-1)*this.pageSize,i=o+this.pageSize-1;this.formData=this.getData(o,i)},getData(e,o){return this.FriendLinkData.slice(e,o+1)},handleDelete(e){G.confirm("你确定删除该行数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{m.deleteById(e).then(o=>{o.success?(f({type:"success",message:"删除成功"}),this.initData()):f({type:"error",message:"删除失败"})})}).catch(()=>{f({type:"warning",message:"取消删除"})})},handleEdit(e){this.dialogFormVisible=!0,m.queryById(e).then(o=>{this.folders=o.data.folder})},toAdd(){this.dialogFormVisible=!0,this.folders={}},excute(){this.folders.id!=null?(m.updateById(this.folders).then(e=>{e.success?(f({type:"success",message:"编辑成功"}),this.initData()):f({type:"error",message:"编辑失败"})}),this.dialogFormVisible=!1):(console.log(this.folders),m.add(this.folders).then(e=>{e.success?(f({type:"success",message:"编辑成功"}),this.initData()):f({type:"error",message:"添加失败"}),this.dialogFormVisible=!1}))}},computed:{valueForStatistic(){return this.friendLinkCount}},mounted(){this.initData(),this.initFriendLinkData(),this.handlePageChange(1)}}),H={class:""},J={class:"table"},K={key:0},Q=["src","onClick"],X={key:1},Y=["href"],Z={key:2},ee=["href"],te={key:3},oe=["href"],le={key:4},ne=["href"],se={key:5},ie=["href"],ae={key:6},de=["href"],re={key:7},ce=["href"],fe={class:"dialog-footer"};function ue(e,o,i,me,ge,pe){const p=U,a=W,v=A,y=q,C=N,g=B,_=j,V=$,F=M,h=T,k=R,x=S,D=z,w=I;return d(),c("div",H,[l(C,{id:"search"},{default:n(()=>[l(y,null,{default:n(()=>[l(v,{span:20},{default:n(()=>[l(p,{modelValue:e.formData.name,"onUpdate:modelValue":o[0]||(o[0]=t=>e.formData.name=t),placeholder:"文件夹名称",clearable:""},null,8,["modelValue"]),l(a,{onClick:e.checkFriendLinkName,type:"primary",round:""},{default:n(()=>[s("检查")]),_:1},8,["onClick"])]),_:1}),l(a,{type:"success",onClick:e.toAdd,style:{"margin-left":"-340px"}},{default:n(()=>[s("添加")]),_:1},8,["onClick"])]),_:1})]),_:1}),r("div",J,[l(V,{data:e.formData,style:{width:"100%"}},{default:n(()=>[l(g,{fixed:"",prop:"id",label:"编号",width:"150",align:"center"}),l(g,{prop:"name",label:"文件夹名称'",width:"120",align:"center"}),l(g,{label:"文件预览",width:"200",align:"center"},{default:n(({row:t})=>[e.isImage(t.logo)?(d(),c("div",K,[r("img",{src:t.logo,alt:"logo",style:{width:"100px",height:"100px"},onClick:u=>e.previewImage(t.logo)},null,8,Q)])):e.isPdf(t.logo)?(d(),c("div",X,[r("a",{href:t.logo,target:"_blank",style:{"text-decoration":"none"}},[l(a,{type:"success",onClick:u=>e.previewPdf(t.logo)},{default:n(()=>[s("预览PDF文档")]),_:2},1032,["onClick"])],8,Y)])):e.isWord(t.logo)?(d(),c("div",Z,[r("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(t.logo)}&embedded=true`,target:"_blank",style:{"text-decoration":"none"}},[l(a,{type:"success",onClick:u=>e.previewWord(t.logo)},{default:n(()=>[s("预览Word文档")]),_:2},1032,["onClick"])],8,ee)])):e.isVideo(t.logo)?(d(),c("div",te,[r("a",{href:t.logo,target:"_blank",style:{"text-decoration":"none"}},[l(a,{type:"success",onClick:u=>e.previewVideo(t.logo)},{default:n(()=>[s("预览视频")]),_:2},1032,["onClick"])],8,oe)])):e.isExcel(t.logo)?(d(),c("div",le,[r("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(t.logo)}&embedded=true`,target:"_blank",style:{"text-decoration":"none"}},[l(a,{type:"success",onClick:u=>e.previewExcel(t.logo)},{default:n(()=>[s("预览Excel表格")]),_:2},1032,["onClick"])],8,ne)])):e.istxt(t.logo)?(d(),c("div",se,[r("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(t.logo)}&embedded=true`,target:"_blank",style:{"text-decoration":"none"}},[l(a,{type:"success",onClick:u=>e.previewExcel(t.logo)},{default:n(()=>[s("预览txt文档")]),_:2},1032,["onClick"])],8,ie)])):e.isPPT(t.logo)?(d(),c("div",ae,[r("a",{href:`https://docs.google.com/viewer?url=${encodeURIComponent(t.logo)}&embedded=true`,target:"_blank",style:{"text-decoration":"none"}},[l(a,{type:"success",onClick:u=>e.previewExcel(t.logo)},{default:n(()=>[s("预览PPT")]),_:2},1032,["onClick"])],8,de)])):(d(),c("div",re,[r("a",{href:t.logo,target:"_blank",style:{"text-decoration":"none"}},[l(a,{type:"success"},{default:n(()=>[s("预览未知文件")]),_:1})],8,ce)]))]),_:1}),l(g,{prop:"url",label:"文件路径",width:"300",align:"center"}),l(g,{label:"是否激活",width:"120",align:"center"},{default:n(({row:t})=>[t.enable==0?(d(),b(_,{key:0},{default:n(()=>[s("未激活")]),_:1})):E("",!0),t.enable==1?(d(),b(_,{key:1},{default:n(()=>[s("激活")]),_:1})):E("",!0)]),_:1}),l(g,{fixed:"right",label:"操作",width:"180",align:"center"},{default:n(t=>[l(a,{onClick:u=>e.handleEdit(t.row.id),type:"primary"},{default:n(()=>[s("编辑")]),_:2},1032,["onClick"]),l(a,{type:"danger",onClick:u=>e.handleDelete(t.row.id)},{default:n(()=>[s("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(F,{small:"",background:"",layout:"prev, pager, next",total:e.friendLinkCount,"page-size":e.pageSize,class:"mt-4",onCurrentChange:e.handlePageChange},null,8,["total","page-size","onCurrentChange"])]),l(w,{modelValue:e.dialogFormVisible,"onUpdate:modelValue":o[7]||(o[7]=t=>e.dialogFormVisible=t),title:"添加/编辑"},{footer:n(()=>[r("span",fe,[l(a,{onClick:o[5]||(o[5]=t=>e.dialogFormVisible=!1)},{default:n(()=>[s("取消")]),_:1}),l(a,{type:"primary",onClick:o[6]||(o[6]=t=>e.excute())},{default:n(()=>[s(" 确定 ")]),_:1})])]),default:n(()=>[l(D,{model:e.folders},{default:n(()=>[l(h,{label:"文件夹名称","label-width":e.formLabelWidth},{default:n(()=>[l(p,{modelValue:e.folders.name,"onUpdate:modelValue":o[1]||(o[1]=t=>e.folders.name=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(h,{label:"预览","label-width":e.formLabelWidth},{default:n(()=>[l(p,{modelValue:e.folders.logo,"onUpdate:modelValue":o[2]||(o[2]=t=>e.folders.logo=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(h,{label:"文件夹路径","label-width":e.formLabelWidth},{default:n(()=>[l(p,{modelValue:e.folders.url,"onUpdate:modelValue":o[3]||(o[3]=t=>e.folders.url=t),autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label-width"]),l(h,{label:"是否激活","label-width":e.formLabelWidth},{default:n(()=>[l(x,{modelValue:e.folders.enable,"onUpdate:modelValue":o[4]||(o[4]=t=>e.folders.enable=t)},{default:n(()=>[l(k,{label:0},{default:n(()=>[s("未激活")]),_:1}),l(k,{label:1},{default:n(()=>[s("激活")]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1},8,["model"])]),_:1},8,["modelValue"])])}const Ve=L(O,[["render",ue],["__scopeId","data-v-9d70e0e4"]]);export{Ve as default};
